var quform=function(o,r,t,e){"use strict";var i,n=o.core,a=n.cache,m=r(document),s=!1;return r((i={init:function(){a.get("#qfb-import-form-button").click(i["import"]),m.on("heartbeat-tick",function(o,r){r&&r.nonces_expired&&r.quformImportFormNonce&&t.importFormNonce!==r.quformImportFormNonce&&(t.importFormNonce=r.quformImportFormNonce)})},validate:function(){if(a.get(".qfb-tools-import-form").find(".qfb-validation-error").remove(),""===a.get("#qfb-import-form-data").val()){var o=a.get("#qfb-import-form-data").closest(n.settingWrap);return n.addValidationError(o,e.thisFieldIsRequired),n.scrollTo(o),!1}return!0},"import":function(){if(!s){if(!i.validate())return!1;s=!0,r.ajax({type:"POST",url:e.ajaxUrl,data:{action:"quform_import_form",_ajax_nonce:t.importFormNonce,config:a.get("#qfb-import-form-data").val()},dataType:"json"}).done(function(o){o=n.sanitizeResponse(o),a.get(".qfb-tools-import-form").find(".qfb-validation-error").remove(),s=!1,"success"==o.type?i.onImportSuccess(o.message):"error"!=o.type&&"invalid"!=o.type||i.onImportFail(o)}).fail(function(){a.get(".qfb-tools-import-form").find(".qfb-validation-error").remove(),s=!1,i.onImportFail({message:e.ajaxError})})}},onImportSuccess:function(o){n.showFixedMessage(o,"success",0)},onImportFail:function(o){var e;n.isNonEmptyString(o.message)&&n.showFixedMessage(t.errorImportingForm+"<br>"+o.message,"error"),o.errors&&r.each(o.errors,function(o,r){var t=a.get("#"+o).closest(n.settingWrap);e||(e=t),n.addValidationError(t,r)}),e&&n.scrollTo(e)}}).init),o.tools=o.tools||{},o.tools.importForm=i,o}(quform,jQuery,quformToolsImportFormL10n,quformCoreL10n);